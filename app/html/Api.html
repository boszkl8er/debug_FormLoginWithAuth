<div id="apiFormIO" onload="divOnload()">
	test api
	
	<script type='text/javascript'>

		console.log('Call api html');
		console.log('-------------------------------------');
		var apiToken = angular.element(document.getElementById('apiFormIO')).scope().getToken3();
		console.log('Send token to API  = '+apiToken);

		var url = 'https://together.azure-api.net/accesscdn/CDNToken?id_token='+apiToken;
		/*$.ajax({
            url: url,
            beforeSend: function(xhrObj){
                //Request headers
            },
            type: "GET",
			success: function (data, textStatus){
				console.log('function success');
				console.log('-------------------------------');
				console.log('data = '+data);
				console.log('data redirect = '+data.redirect);
			}
        }).done(function(data){
            console.log('done');
			console.log('data = '+data);
        }).fail(function(err){
            console.log(err)
        });*/
		
		$.ajax({
            url: url,
            beforeSend: function(xhrObj){
                //Request headers
            },
            type: "GET",
			success: function (data, textStatus, jqXHR){
				console.log('function success');
				console.log('-------------------------------');
				console.log('data = '+data);
				console.log('data redirect = '+data.redirect);
				console.log('textStatus = '+textStatus);
				console.log('jqXHR = '+jqXHR);
			},
			/*error: function(obj){
				console.log('error obj = '+obj);
			},*/
			error: function(xhr, textStatus, errorThrown, response, status, error) { 
			
				//var err = eval("(" + xhr.responseText + ")");
				//alert('err message = '+err.Message);
			
				console.log('xhr = '+xhr);
				console.log('xhr text'+xhr.responseText);
				console.log('Error!  Status = ' + xhr.status);
				console.log('textStatus = '+textStatus);
				console.log('errorThrown = '+errorThrown);
				console.log('status = '+status);
				console.log('error = '+error);
				
				console.log('response = '+response);
				//console.log('response = '+response.redirect);
				
				//window.location.href = 'https://login.microsoftonline.com/3e0b6cbd-4959-4d01-81bf-ce883ddabd96/oauth2/authorize?response_type=id_token&response_mode=query&login_hint=x@togetherteam.co.th&domain_hint=3e0b6cbd-4959-4d01-81bf-ce883ddabd96&client_id=3222f6ca-f781-4c1e-a1fa-84b9af8a3800&redirect_uri=https%3A%2F%2Ftogether.azure-api.net%2FToken%2FRedirect&state=https%3A%2F%2Ftogether.azure-api.net%2Faccesscdn%2FCDNToken&nonce=def';
				
				//window.location.href = 'https://together.azure-api.net/accesscdn/CDNToken?id_token='+apiToken;
			},
       });
		console.log('-------------------------------------');
		
	</script>
</div>